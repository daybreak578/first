<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>여행 코스 목록</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<style>
    body {
        font-family: 'Arial', sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 20px;
    }
    
    /* 컨테이너 스타일 */
    .event-container {
        max-width: 800px;
        margin: 0 auto;
        background: #ffffff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    /* 제목 스타일 */
    h2 {
        text-align: center;
        color: #333;
        margin-bottom: 20px;
    }
    
    /* 개별 코스 아이템 */
    .course-item {
        background: #ffffff;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 15px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    
    /* 소제목 */
    h3 {
        color: #007BFF;
        margin-bottom: 8px;
    }
    
    /* 텍스트 스타일 */
    p {
        color: #555;
        line-height: 1.6;
        font-size: 14px;
    }
    
    /* 이미지 스타일 */
    img {
        max-width: 100%;
        border-radius: 8px;
        display: block;
        margin: 10px auto;
    }
    
    /* 구분선 */
    hr {
        border: 0;
        height: 1px;
        background: #ddd;
        margin: 15px 0;
    }
</style>
</head>

<body>
    <div class="event-container">
     
        <div id="eventInfo">정보를 불러오는 중...</div>
    </div>
    <script>
        let urlParams = new URLSearchParams(window.location.search);
        let contentid = urlParams.get('contentid');

        console.log("contentid", contentid);  // contentid가 제대로 출력되는지 확인

        function fetchContentDetails(contentid) {
            if (!contentid) {
                $("#eventInfo").html("<p>관광 정보가 제공되지 않았습니다.</p>");
                return;
            }



            $.ajax({
                url: "http://apis.data.go.kr/B551011/KorService1/detailInfo1",
                type: "GET",
                data: {
                    serviceKey: "5EPM0JZGu2vix+JS73ESvNyiqPOiAlZvqw7HOMHMsVok5OAlScfevj/AcerZwoWPXx/B6AkWxHZhcfUp0j/aVA==", // API 키 입력
                    MobileApp: "AppTest",
                    MobileOS: "ETC",
                    contentId: contentid,
                    contentTypeId: "25",  // 여행코스 콘텐츠 유형
                    _type: "json",

                },
                success: function (response) {
                    console.log("API 응답:", response);

                    let items = response.response.body.items.item;
                    if (!items || items.length === 0) {
                        $("#eventInfo").html("<p>데이터를 찾을 수 없습니다.</p>");
                        return;
                    }

                    let item = items[0];  // 첫 번째 데이터

                    function checkValue(value) {
                        return value && value.trim() !== "" ? value : "정보 없음";
                    }

                    let eventInfoHtml = "<h2>관광 코스 정보</h2>";

                    items.forEach(item => {
                        eventInfoHtml += `
            <div class="course-item">
           
                    <p><strong>코스명:</strong> ${checkValue(item.subname)}</p>
                <p><strong>코스 이미지 설명:</strong> ${checkValue(item.subdetailalt)}</p>
                <p><strong>코스 개요:</strong> ${checkValue(item.subdetailoverview)}</p>
                
                ${item.subdetailimg ? `<img src="${item.subdetailimg}" alt="코스 이미지" style="max-width:300px;">` : '<p>이미지 없음</p>'}
            </div>
            <hr>
        `;
                    });

                    $("#eventInfo").html(eventInfoHtml);
                },
                error: function (xhr, status, error) {
                    console.error("API 요청 실패:", error);
                    console.error("상태 코드:", xhr.status);
                    console.error("응답 메시지:", xhr.responseText);
                    $("#eventInfo").html(`<p>데이터를 불러오는 중 오류가 발생했습니다. (${xhr.status})</p>`);
                }

            });
        }

        $(document).ready(function () {
            fetchContentDetails(contentid);  // 페이지가 로드되면 행사 정보를 불러오기
        });

    </script>

</body>

</html>